import subprocess
import os
from string import Template

def read_corefile():
    corefile = open("./backup.corefile", "r").read()
    return corefile
    
def restore():
    corefile = read_corefile()
    patch = Template('kubectl patch cm -n kube-system coredns -p "{\\"data\\":{\\"Corefile\\":\\"$corefile\\"}}"')
    output = patch.substitute(corefile=corefile)
    os.system(output)

restore()